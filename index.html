<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="description" content="Akashic Works ‚Äî Servicios de apoyo, bienestar y preparaci√≥n de emergencia para personas mayores en Puerto Rico">
  <title>Akashic Works</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400&family=Nunito:wght@400;500;600;700;800&family=Lora:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    :root{--body:'Nunito',sans-serif;--head:'Cormorant Garamond',serif;--accent:'Lora',serif;--text:#111827;--muted:#374151;--light:#5A6172;--card:#FFFFFF;--green:#2E7D52;--red:#B83D20;--purple:#5B4D8F;--gold:#8A6C2C;--gold-light:#B08A38;--blue:#2A5F95;--teal:#2A7E6E;--orange:#A45E35;--storm:#0F1729;--storm-accent:#3B82C4;--storm-warn:#D49520;--storm-danger:#D04040;--storm-safe:#2D8E5C;--shadow:0 3px 24px rgba(17,24,39,.14);--radius:18px;--border:1.5px solid rgba(17,24,39,.1)}
    body{min-height:100vh;background:linear-gradient(160deg,#C8BDAB 0%,#BBB09E 40%,#B0A594 100%);font-family:var(--body);color:var(--text);-webkit-font-smoothing:antialiased;letter-spacing:.01em}
    button,[role="button"]{min-height:48px;min-width:48px;cursor:pointer}
    .wrap{max-width:520px;margin:0 auto;padding:20px 16px 120px}
    .fi{opacity:0;transform:translateY(12px);animation:fu .5s ease forwards}
    .d1{animation-delay:.1s}.d2{animation-delay:.2s}.d3{animation-delay:.3s}
    .d4{animation-delay:.4s}.d5{animation-delay:.5s}.d6{animation-delay:.6s}
    .d7{animation-delay:.7s}.d8{animation-delay:.8s}.d9{animation-delay:.9s}.d10{animation-delay:1s}
    @keyframes fu{to{opacity:1;transform:translateY(0)}}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    @keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
    @keyframes pop{0%{transform:scale(.9)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
    @keyframes checkPop{0%{transform:scale(1)}50%{transform:scale(1.25)}100%{transform:scale(1)}}
    @keyframes shimmer{0%{background-position:-200% center}100%{background-position:200% center}}
    @keyframes glowPulse{0%,100%{opacity:.35;transform:scale(1)}50%{opacity:.65;transform:scale(1.08)}}
    @keyframes floatOrb{0%,100%{transform:translate(0,0)}33%{transform:translate(12px,-10px)}66%{transform:translate(-6px,6px)}}
    @keyframes lineGrow{from{width:0}to{width:60px}}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
    @keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}
    @keyframes radarSweep{0%{transform:scale(.6);opacity:.8}100%{transform:scale(2.2);opacity:0}}
    @keyframes stormPulse{0%,100%{box-shadow:0 0 30px rgba(59,130,196,.15)}50%{box-shadow:0 0 60px rgba(59,130,196,.3)}}
    @keyframes safeGlow{0%,100%{box-shadow:0 8px 40px rgba(56,184,124,.3)}50%{box-shadow:0 8px 60px rgba(56,184,124,.5)}}
    @keyframes breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.03)}}
    @keyframes countdownPulse{0%,100%{color:var(--storm-danger)}50%{color:var(--storm-warn)}}
    @keyframes slideIn{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}

    /* ‚ïê‚ïê‚ïê BRAND ‚ïê‚ïê‚ïê */
    .brand{text-align:center;padding:40px 24px 32px;position:relative;overflow:hidden;background:linear-gradient(160deg,#111827 0%,#1A2035 40%,#1E2540 100%);border-radius:var(--radius);margin-bottom:16px;box-shadow:0 8px 40px rgba(17,24,39,.35);border:1.5px solid rgba(138,108,44,.15)}
    .brand::before{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:320px;height:320px;border-radius:50%;background:radial-gradient(circle,rgba(138,108,44,.2) 0%,rgba(138,108,44,.05) 40%,transparent 65%);animation:glowPulse 4s ease-in-out infinite;pointer-events:none}
    .brand::after{content:'';position:absolute;top:10%;right:8%;width:120px;height:120px;border-radius:50%;background:radial-gradient(circle,rgba(176,138,56,.08) 0%,transparent 70%);animation:floatOrb 8s ease-in-out infinite;pointer-events:none}
    .brand-sym{margin-bottom:14px;display:block;animation:breathe 4s ease-in-out infinite}
    .brand-title{font-family:var(--head);line-height:1.05;display:inline-block}
    .brand-title .ak{display:block;font-weight:700;font-size:52px;letter-spacing:8px;background:linear-gradient(135deg,#C4A258 0%,#E8C868 25%,#F0D878 50%,#E8C868 75%,#C4A258 100%);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:shimmer 4s linear infinite;filter:drop-shadow(0 2px 8px rgba(176,138,56,.3))}
    .brand-title .wk{display:block;font-weight:500;font-size:22px;letter-spacing:16px;color:rgba(196,162,88,.7);text-transform:uppercase;margin-top:5px;padding-left:6px}
    .brand-line{width:80px;height:2px;background:linear-gradient(90deg,transparent,rgba(196,162,88,.6),transparent);margin:16px auto 12px;border:none;animation:lineGrow 1s ease forwards}
    .brand-tag{font-family:var(--body);font-size:11px;font-weight:800;color:rgba(255,255,255,.6);letter-spacing:3px;text-transform:uppercase;text-align:center;white-space:nowrap}
    .brand-accent-line{position:absolute;bottom:0;left:0;right:0;height:3px;background:linear-gradient(90deg,transparent 5%,rgba(196,162,88,.4) 30%,rgba(196,162,88,.6) 50%,rgba(196,162,88,.4) 70%,transparent 95%)}

    /* ‚ïê‚ïê‚ïê VIEW TOGGLE (3 tabs) ‚ïê‚ïê‚ïê */
    .view-toggle{display:flex;gap:5px;background:rgba(17,24,39,.08);border:1.5px solid rgba(17,24,39,.1);border-radius:14px;padding:5px;margin:0 0 16px;position:sticky;top:0;z-index:50;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px)}
    .view-btn{flex:1;padding:13px 0;border:none;background:transparent;font-family:var(--body);font-size:14px;font-weight:700;color:var(--light);border-radius:10px;transition:all .25s;text-align:center}
    .view-btn.act{background:var(--text);color:white;box-shadow:0 3px 14px rgba(17,24,39,.25)}
    .view-btn.fam-active{background:var(--purple);color:white;box-shadow:0 3px 14px rgba(91,77,143,.3)}
    .view-btn.esc-active{background:var(--storm);color:white;box-shadow:0 3px 14px rgba(59,130,196,.3)}

    /* ‚ïê‚ïê‚ïê SHARED STYLES ‚ïê‚ïê‚ïê */
    .saludo{background:linear-gradient(135deg,var(--card) 0%,#F5EEDF 100%);border-radius:var(--radius);padding:28px 24px;margin-bottom:16px;box-shadow:var(--shadow);border:var(--border);position:relative;overflow:hidden}
    .saludo::after{content:'';position:absolute;top:-40%;right:-20%;width:180px;height:180px;border-radius:50%;background:radial-gradient(circle,rgba(196,162,88,.2) 0%,transparent 70%)}
    .fecha{font-size:15px;color:var(--light);font-weight:700;letter-spacing:.3px;margin-bottom:4px}
    .saludo-h{font-family:var(--head);font-size:30px;font-weight:700;color:var(--text);line-height:1.2}
    .saludo-msg{font-size:17px;color:var(--muted);line-height:1.6;margin-top:16px;padding-top:16px;border-top:1px solid rgba(26,29,43,.08);font-style:italic;font-family:var(--accent)}
    .sound-toggle{position:absolute;top:16px;right:16px;z-index:2;background:rgba(26,29,43,.06);border:1px solid rgba(26,29,43,.06);border-radius:12px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;font-size:22px;transition:background .2s}
    .sound-toggle:hover{background:rgba(26,29,43,.12)}
    .services-intro{text-align:center;padding:8px 0 20px}
    .services-intro-h{font-family:var(--head);font-size:28px;font-weight:700;color:var(--text);margin-bottom:6px}
    .services-intro-line{width:40px;height:2px;background:linear-gradient(90deg,transparent,var(--gold),transparent);margin:0 auto 10px;border:none}
    .services-intro-p{font-family:var(--accent);font-size:15px;font-style:italic;color:var(--light);line-height:1.5;max-width:380px;margin:0 auto}
    .svc-card{background:var(--card);border-radius:var(--radius);padding:24px;margin-bottom:14px;box-shadow:var(--shadow);border:var(--border);display:flex;gap:18px;align-items:flex-start;transition:all .3s ease;border-left:5px solid transparent;position:relative;overflow:hidden}
    .svc-card:hover{transform:translateY(-2px);box-shadow:0 8px 32px rgba(26,29,43,.14)}
    .svc-icon{width:64px;height:64px;border-radius:18px;display:flex;align-items:center;justify-content:center;font-size:30px;flex-shrink:0}
    .svc-body{flex:1;min-width:0}
    .svc-num{font-family:var(--head);font-size:13px;font-weight:700;color:var(--gold);letter-spacing:2px;text-transform:uppercase;margin-bottom:4px}
    .svc-title{font-family:var(--head);font-size:22px;font-weight:700;color:var(--text);line-height:1.2;margin-bottom:8px}
    .svc-desc{font-size:16px;color:var(--muted);line-height:1.6;font-weight:600}
    .svc-tag{display:inline-block;margin-top:12px;padding:6px 14px;border-radius:100px;font-size:12px;font-weight:800;letter-spacing:.8px;text-transform:uppercase}
    .svc-medical{border-left-color:var(--red)}.svc-medical .svc-icon{background:rgba(184,61,32,.12)}.svc-medical .svc-tag{background:rgba(184,61,32,.1);color:var(--red)}
    .svc-calls{border-left-color:var(--blue)}.svc-calls .svc-icon{background:rgba(42,95,149,.12)}.svc-calls .svc-tag{background:rgba(42,95,149,.1);color:var(--blue)}
    .svc-payments{border-left-color:var(--green)}.svc-payments .svc-icon{background:rgba(46,125,82,.12)}.svc-payments .svc-tag{background:rgba(46,125,82,.1);color:var(--green)}
    .svc-transport{border-left-color:var(--gold)}.svc-transport .svc-icon{background:rgba(138,108,44,.12)}.svc-transport .svc-tag{background:rgba(138,108,44,.1);color:var(--gold)}
    .svc-forms{border-left-color:var(--purple)}.svc-forms .svc-icon{background:rgba(91,77,143,.12)}.svc-forms .svc-tag{background:rgba(91,77,143,.1);color:var(--purple)}
    .svc-daily{border-left-color:var(--teal)}.svc-daily .svc-icon{background:rgba(42,126,110,.12)}.svc-daily .svc-tag{background:rgba(42,126,110,.1);color:var(--teal)}
    .svc-family{border-left-color:var(--orange)}.svc-family .svc-icon{background:rgba(164,94,53,.12)}.svc-family .svc-tag{background:rgba(164,94,53,.1);color:var(--orange)}
    .svc-trust{border-left-color:#2D3048}.svc-trust .svc-icon{background:rgba(45,48,72,.1)}.svc-trust .svc-tag{background:rgba(45,48,72,.08);color:#2D3048}
    .section-divider{display:flex;align-items:center;gap:16px;margin:28px 0 20px;padding:0 8px}
    .section-divider-line{flex:1;height:2px;background:linear-gradient(90deg,transparent,rgba(166,132,62,.3),transparent)}
    .section-divider-text{font-family:var(--head);font-size:14px;font-weight:700;color:var(--gold);letter-spacing:3px;text-transform:uppercase;white-space:nowrap}

    /* Daily tools */
    .prog{background:var(--card);border-radius:var(--radius);padding:22px 24px;margin-bottom:16px;box-shadow:var(--shadow);border:var(--border)}
    .prog-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
    .prog-lbl{font-size:14px;font-weight:800;color:var(--light);text-transform:uppercase;letter-spacing:1.2px}
    .prog-num{font-family:var(--head);font-size:24px;font-weight:700;color:var(--green)}
    .prog-bg{width:100%;height:12px;background:#D4CABC;border-radius:100px;overflow:hidden}
    .prog-fill{height:100%;border-radius:100px;transition:width .8s cubic-bezier(.4,0,.2,1);background:linear-gradient(90deg,var(--green),#68B48A);width:0%}
    .prog-txt{font-size:15px;color:var(--muted);margin-top:12px;font-weight:600;text-align:center}
    .mood{background:var(--card);border-radius:var(--radius);padding:24px;margin-bottom:16px;box-shadow:var(--shadow);border:var(--border)}
    .mood-h{font-family:var(--head);font-size:24px;font-weight:700;color:var(--text);margin-bottom:18px}
    .mood-grid{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
    .mood-btn{width:88px;height:88px;border-radius:20px;border:3px solid rgba(26,29,43,.1);background:#F5F0E8;transition:all .25s;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px}
    .mood-btn:hover{border-color:rgba(26,29,43,.2);transform:translateY(-2px)}
    .mood-btn.sel{border-color:var(--green);background:rgba(74,142,106,.1);transform:translateY(-2px);animation:pop .3s ease}
    .mood-e{font-size:36px;line-height:1}.mood-lb{font-size:13px;font-weight:700;color:var(--muted)}
    .mood-resp{font-size:17px;color:var(--green);font-weight:700;text-align:center;margin-top:18px;line-height:1.5;opacity:0}
    .tabs{display:flex;gap:4px;background:rgba(26,29,43,.08);border:2px solid rgba(26,29,43,.06);border-radius:16px;padding:5px;margin-bottom:16px}
    .tab-b{flex:1;padding:14px 0;border:none;background:transparent;font-family:var(--body);font-size:16px;font-weight:700;color:var(--light);border-radius:12px;transition:all .3s}
    .tab-b.act{background:var(--card);color:var(--text);box-shadow:0 3px 10px rgba(26,29,43,.1)}
    .rc{background:var(--card);border-radius:18px;padding:18px 20px;margin-bottom:12px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 12px rgba(26,29,43,.07);border:var(--border);transition:all .25s;cursor:pointer;border-left:5px solid transparent}
    .rc:hover{box-shadow:0 6px 24px rgba(26,29,43,.12)}.rc:active{transform:scale(.99)}
    .rc.done{opacity:.55;background:#EDE8E0}.rc.done .rc-txt{text-decoration:line-through;color:var(--light)}
    .rc-chk{width:48px;height:48px;border-radius:50%;border:3px solid;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .3s;font-size:22px;font-weight:700;background:transparent}
    .rc-chk.on{color:white!important;animation:checkPop .3s ease}
    .rc-body{flex:1;min-width:0}.rc-txt{font-size:18px;font-weight:700;color:var(--text);line-height:1.35;margin-bottom:4px}
    .rc-time{font-size:14px;color:var(--light);font-weight:700;display:flex;align-items:center;gap:8px}
    .rc-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;display:inline-block}
    .rc-del{background:rgba(212,93,63,.08);border:none;color:var(--red);width:48px;height:48px;border-radius:14px;font-size:24px;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .2s}
    .rc-del:hover{background:rgba(212,93,63,.15)}
    .del-confirm{background:#F5E8E4;border:2px solid rgba(196,77,47,.2);border-radius:18px;padding:20px;margin-bottom:12px;text-align:center}
    .del-msg{font-size:17px;color:var(--text);font-weight:700;margin-bottom:16px;line-height:1.4}
    .del-btns{display:flex;gap:12px}
    .del-yes{flex:1;padding:14px;border:none;border-radius:14px;background:var(--red);color:white;font-family:var(--body);font-size:16px;font-weight:700}
    .del-no{flex:1;padding:14px;border:2px solid rgba(44,47,62,.1);border-radius:14px;background:white;color:var(--text);font-family:var(--body);font-size:16px;font-weight:700}
    .aform{background:var(--card);border-radius:var(--radius);padding:28px 24px;margin-bottom:16px;box-shadow:0 6px 32px rgba(26,29,43,.12);border:var(--border);display:none}
    .aform.open{display:block;animation:fu .3s ease}
    .flbl{font-size:14px;font-weight:800;color:var(--muted);text-transform:uppercase;letter-spacing:1.2px;margin-bottom:10px;display:block}
    .finp{width:100%;padding:16px 18px;border:2px solid rgba(26,29,43,.12);border-radius:14px;font-family:var(--body);font-size:18px;color:var(--text);background:#F5F0E8;outline:none;transition:border-color .3s;margin-bottom:20px}
    .finp:focus{border-color:var(--gold)}
    .fsel{width:100%;padding:16px 18px;border:2px solid rgba(26,29,43,.12);border-radius:14px;font-family:var(--body);font-size:18px;color:var(--text);background:#F5F0E8;outline:none;margin-bottom:20px;appearance:none;-webkit-appearance:none;background-image:url("data:image/svg+xml,%3Csvg width='14' height='9' viewBox='0 0 14 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L7 7L13 1' stroke='%236E7186' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 18px center}
    .cpills{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}
    .cpill{padding:12px 18px;border-radius:100px;border:2px solid rgba(44,47,62,.08);background:transparent;font-family:var(--body);font-size:15px;font-weight:700;color:var(--muted);transition:all .2s}
    .cpill.sel{color:white;border-color:transparent}
    .fbtns{display:flex;gap:12px}
    .btn-go{flex:1;padding:16px;border:none;border-radius:14px;background:linear-gradient(135deg,var(--green),#246B42);color:white;font-family:var(--body);font-size:17px;font-weight:700;transition:all .3s}
    .btn-go:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(46,125,82,.35)}
    .btn-cancel{padding:16px 24px;border:2px solid rgba(44,47,62,.1);border-radius:14px;background:transparent;color:var(--muted);font-family:var(--body);font-size:17px;font-weight:700}
    .fab-add{position:fixed;bottom:24px;right:calc(50% - 244px);width:64px;height:64px;border-radius:50%;border:none;background:linear-gradient(135deg,var(--gold),#7A5E20);color:white;font-size:32px;font-weight:300;box-shadow:0 6px 28px rgba(138,108,44,.45);display:flex;align-items:center;justify-content:center;transition:all .3s;z-index:10}
    .fab-add:hover{transform:scale(1.08)}
    .fab-ci{position:fixed;bottom:24px;left:calc(50% - 244px);height:64px;padding:0 28px;border-radius:100px;border:none;background:linear-gradient(135deg,var(--purple),#4A3D7E);color:white;font-family:var(--body);font-size:17px;font-weight:700;box-shadow:0 6px 28px rgba(91,77,143,.4);display:flex;align-items:center;gap:10px;transition:all .3s;z-index:10}
    .fab-ci:hover{transform:scale(1.04)}
    .overlay{position:fixed;inset:0;background:rgba(17,24,39,.5);backdrop-filter:blur(12px);display:none;align-items:flex-end;justify-content:center;z-index:100;animation:fadeIn .3s ease}
    .overlay.open{display:flex}
    .sheet{background:var(--card);border-radius:28px 28px 0 0;padding:32px 24px 40px;width:100%;max-width:520px;max-height:88vh;overflow-y:auto;animation:slideUp .4s cubic-bezier(.16,1,.3,1);border-top:2px solid rgba(26,29,43,.06)}
    .handle{width:48px;height:5px;background:rgba(44,47,62,.12);border-radius:100px;margin:0 auto 24px}
    .ci-t{font-family:var(--head);font-size:28px;font-weight:600;color:var(--text);margin-bottom:8px}
    .ci-sub{font-size:17px;color:var(--muted);margin-bottom:28px;line-height:1.5}
    .ci-ta{width:100%;padding:18px;border:2px solid rgba(26,29,43,.12);border-radius:16px;font-family:var(--body);font-size:18px;color:var(--text);background:#F5F0E8;outline:none;resize:none;min-height:120px;line-height:1.6;margin-bottom:24px}
    .ci-ta:focus{border-color:var(--purple)}
    .ci-ok{text-align:center;padding:48px 0}.ci-ok-e{font-size:56px;margin-bottom:20px}
    .ci-ok-t{font-family:var(--head);font-size:24px;font-weight:700;color:var(--text)}
    .ci-ok-sub{font-size:17px;color:var(--muted);margin-top:10px}
    .ci-mood-grid{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-bottom:24px}
    .ci-mood-btn{width:80px;height:80px;border-radius:18px;border:3px solid rgba(26,29,43,.1);background:#F5F0E8;transition:all .25s;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;cursor:pointer}
    .ci-mood-btn:hover{border-color:rgba(26,29,43,.2)}.ci-mood-btn.sel{border-color:var(--green);background:rgba(74,142,106,.1)}
    .empty{text-align:center;padding:48px 20px}.empty-e{font-size:48px;margin-bottom:16px}
    .empty-t{font-size:18px;color:var(--muted);line-height:1.6;font-weight:600}
    .hidden{display:none!important}
    .footer{text-align:center;margin-top:40px;padding:20px;border-top:2px solid rgba(26,29,43,.08)}
    .footer-b{font-family:var(--head);font-size:16px;font-weight:700;color:var(--muted);letter-spacing:4px}
    .footer-s{font-family:var(--accent);font-size:12px;font-style:italic;color:var(--light);margin-top:4px}

    /* Family Portal */
    .fam-header{background:linear-gradient(135deg,#EDE8F5 0%,#E2DCF0 50%,#D8D2E8 100%);border-radius:var(--radius);padding:28px 24px;margin-bottom:16px;box-shadow:var(--shadow);border:1px solid rgba(107,93,159,.12);position:relative;overflow:hidden}
    .fam-header::before{content:'';position:absolute;top:-30%;right:-15%;width:160px;height:160px;border-radius:50%;background:radial-gradient(circle,rgba(107,93,159,.15) 0%,transparent 70%)}
    .fam-header-label{font-size:12px;font-weight:800;color:var(--purple);letter-spacing:2px;text-transform:uppercase;margin-bottom:6px}
    .fam-header-name{font-family:var(--head);font-size:28px;font-weight:700;color:var(--text);margin-bottom:4px}
    .fam-header-status{display:flex;align-items:center;gap:8px;font-size:15px;color:var(--muted);font-weight:700}
    .fam-status-dot{width:10px;height:10px;border-radius:50%;background:var(--green);animation:pulse 2s ease-in-out infinite}
    .fam-header-updated{font-size:13px;color:var(--light);margin-top:8px;font-style:italic}
    .alert-section{margin-bottom:16px}
    .alert-card{border-radius:16px;padding:16px 20px;margin-bottom:10px;display:flex;align-items:center;gap:14px;font-size:16px;font-weight:700;animation:fu .4s ease forwards;opacity:0}
    .alert-urgent{background:rgba(184,61,32,.12);border:2px solid rgba(184,61,32,.25);color:#8B2010}
    .alert-warn{background:rgba(138,108,44,.12);border:2px solid rgba(138,108,44,.25);color:#5C4A12}
    .alert-info{background:rgba(46,125,82,.1);border:2px solid rgba(46,125,82,.2);color:#1A5C35}
    .alert-icon{font-size:24px;flex-shrink:0}
    .alert-body{flex:1;min-width:0}
    .alert-title{font-size:15px;font-weight:800;margin-bottom:2px}
    .alert-desc{font-size:14px;font-weight:700}
    .alert-time{font-size:12px;font-weight:700;opacity:.7;margin-top:4px}
    .fam-section{background:var(--card);border-radius:var(--radius);padding:24px;margin-bottom:16px;box-shadow:var(--shadow);border:var(--border)}
    .fam-section-h{font-family:var(--head);font-size:22px;font-weight:700;color:var(--text);margin-bottom:4px;display:flex;align-items:center;gap:10px}
    .fam-section-sub{font-size:14px;color:var(--light);margin-bottom:18px;font-weight:600}
    .wellness-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .wellness-stat{background:#F5F0E8;border-radius:16px;padding:18px;text-align:center;border:1px solid rgba(26,29,43,.05)}
    .wellness-stat-icon{font-size:28px;margin-bottom:6px}
    .wellness-stat-val{font-family:var(--head);font-size:28px;font-weight:700;color:var(--text)}
    .wellness-stat-label{font-size:13px;color:var(--light);font-weight:600;margin-top:2px}
    .mood-timeline{display:flex;justify-content:space-between;gap:6px;margin-top:12px}
    .mood-day{text-align:center;flex:1}
    .mood-day-label{font-size:11px;color:var(--light);font-weight:700;margin-bottom:6px;text-transform:uppercase}
    .mood-day-emoji{font-size:24px;width:44px;height:44px;border-radius:12px;background:#F0EBE2;display:flex;align-items:center;justify-content:center;margin:0 auto}
    .mood-day-emoji.today{background:rgba(74,142,106,.12);border:2px solid rgba(74,142,106,.25)}
    .appt-item{display:flex;gap:14px;padding:14px 0;border-bottom:1px solid rgba(26,29,43,.08)}.appt-item:last-child{border-bottom:none}
    .appt-date{width:52px;height:52px;border-radius:14px;background:rgba(74,127,181,.08);display:flex;flex-direction:column;align-items:center;justify-content:center;flex-shrink:0}
    .appt-date-month{font-size:11px;font-weight:800;color:var(--blue);text-transform:uppercase;letter-spacing:1px}
    .appt-date-day{font-family:var(--head);font-size:22px;font-weight:700;color:var(--text);line-height:1}
    .appt-body{flex:1}.appt-title{font-size:16px;font-weight:700;color:var(--text);margin-bottom:3px}
    .appt-detail{font-size:14px;color:var(--light);font-weight:600}
    .appt-status{font-size:12px;font-weight:700;padding:4px 10px;border-radius:100px;margin-top:6px;display:inline-block}
    .appt-confirmed{background:rgba(46,125,82,.12);color:var(--green)}
    .appt-pending{background:rgba(138,108,44,.12);color:var(--gold)}
    .appt-done{background:rgba(17,24,39,.06);color:var(--light)}
    .med-item{display:flex;align-items:center;gap:14px;padding:14px 0;border-bottom:1px solid rgba(26,29,43,.08)}.med-item:last-child{border-bottom:none}
    .med-icon{width:48px;height:48px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:22px;flex-shrink:0}
    .med-body{flex:1}.med-name{font-size:16px;font-weight:700;color:var(--text)}.med-dose{font-size:14px;color:var(--light);font-weight:600}
    .med-schedule{display:flex;gap:6px;margin-top:6px;flex-wrap:wrap}
    .med-time{font-size:12px;font-weight:700;padding:4px 10px;border-radius:100px;background:#F0EBE2;color:var(--muted)}
    .med-time.taken{background:rgba(74,142,106,.1);color:var(--green)}.med-time.missed{background:rgba(196,77,47,.1);color:var(--red)}
    .msg-item{padding:14px 0;border-bottom:1px solid rgba(26,29,43,.08)}.msg-item:last-child{border-bottom:none}
    .msg-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
    .msg-author{font-size:15px;font-weight:700;color:var(--text);display:flex;align-items:center;gap:8px}
    .msg-avatar{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;color:white;font-weight:700}
    .msg-time-label{font-size:12px;color:var(--light);font-weight:600}
    .msg-text{font-size:15px;color:var(--muted);line-height:1.55;font-weight:600}
    .msg-input-wrap{display:flex;gap:10px;margin-top:16px;padding-top:16px;border-top:1px solid rgba(26,29,43,.08)}
    .msg-input{flex:1;padding:14px 16px;border:2px solid rgba(26,29,43,.1);border-radius:14px;font-family:var(--body);font-size:16px;color:var(--text);background:#F5F0E8;outline:none}
    .msg-input:focus{border-color:var(--purple)}
    .msg-send{width:52px;height:52px;border:none;border-radius:14px;background:linear-gradient(135deg,var(--purple),#4A3D7E);color:white;font-size:20px;display:flex;align-items:center;justify-content:center;transition:all .2s}
    .msg-send:hover{transform:scale(1.05)}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       üåÄ ESCUDO BORICUA ‚Äî EMERGENCY SYSTEM
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

    /* Storm Header */
    .storm-header{background:linear-gradient(135deg,var(--storm) 0%,#1A2C40 50%,#152535 100%);border-radius:var(--radius);padding:28px 24px;margin-bottom:16px;position:relative;overflow:hidden;animation:stormPulse 4s ease-in-out infinite;border:1.5px solid rgba(59,130,196,.1)}
    .storm-header::before{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;border-radius:50%;border:1px solid rgba(59,130,196,.1);animation:radarSweep 3s ease-out infinite}
    .storm-header::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;border-radius:50%;border:1px solid rgba(59,130,196,.08);animation:radarSweep 3s ease-out infinite;animation-delay:1s}
    .storm-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(59,130,196,.15);border:1px solid rgba(59,130,196,.25);border-radius:100px;padding:6px 14px;font-size:12px;font-weight:800;color:var(--storm-accent);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:12px}
    .storm-badge-dot{width:8px;height:8px;border-radius:50%;background:var(--storm-safe);animation:pulse 2s ease-in-out infinite}
    .storm-title{font-family:var(--head);font-size:34px;font-weight:700;color:white;line-height:1.1;margin-bottom:4px}
    .storm-title .esc-icon{font-size:32px;margin-right:6px}
    .storm-subtitle{font-family:var(--accent);font-size:15px;color:rgba(255,255,255,.5);font-style:italic;letter-spacing:.5px}
    .storm-status{margin-top:18px;padding-top:16px;border-top:1px solid rgba(255,255,255,.08)}
    .storm-status-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .storm-status-label{font-size:13px;color:rgba(255,255,255,.4);font-weight:700;text-transform:uppercase;letter-spacing:1px}
    .storm-status-val{font-size:15px;color:white;font-weight:700;display:flex;align-items:center;gap:6px}
    .storm-status-val.safe{color:var(--storm-safe)}
    .storm-status-val.caution{color:var(--storm-warn)}
    .storm-status-val.danger{color:var(--storm-danger)}

    /* ESTOY BIEN Button */
    .estoy-bien-wrap{text-align:center;margin-bottom:20px}
    .estoy-bien{width:100%;padding:0;border:none;border-radius:var(--radius);background:linear-gradient(135deg,#228855,var(--storm-safe));color:white;font-family:var(--body);min-height:120px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;transition:all .3s;box-shadow:0 8px 40px rgba(45,142,92,.35);animation:breathe 3s ease-in-out infinite}
    .estoy-bien:hover{transform:scale(1.02);box-shadow:0 12px 50px rgba(45,142,92,.45)}
    .estoy-bien:active{transform:scale(.98)}
    .estoy-bien-icon{font-size:40px}
    .estoy-bien-text{font-size:28px;font-weight:800;letter-spacing:1px}
    .estoy-bien-sub{font-size:14px;font-weight:600;opacity:.8}
    .estoy-bien.sent{background:linear-gradient(135deg,#2DA06A,#228855);animation:safeGlow 2s ease-in-out infinite}
    .estoy-bien.sent .estoy-bien-text{font-size:24px}
    .bien-confirm{text-align:center;padding:16px;background:rgba(56,184,124,.06);border:2px solid rgba(56,184,124,.15);border-radius:16px;margin-bottom:16px;animation:fu .4s ease}
    .bien-confirm-icon{font-size:32px;margin-bottom:6px}
    .bien-confirm-text{font-size:16px;font-weight:700;color:var(--storm-safe)}
    .bien-confirm-sub{font-size:14px;color:var(--muted);margin-top:4px}

    /* Emergency Section Card */
    .esc-section{background:var(--card);border-radius:var(--radius);padding:24px;margin-bottom:16px;box-shadow:var(--shadow);border:var(--border)}
    .esc-section-h{font-family:var(--head);font-size:22px;font-weight:700;color:var(--text);margin-bottom:4px;display:flex;align-items:center;gap:10px}
    .esc-section-sub{font-size:14px;color:var(--light);margin-bottom:18px;font-weight:600}

    /* Med Inventory */
    .med-inv-item{display:flex;align-items:center;gap:14px;padding:14px 0;border-bottom:1px solid rgba(26,29,43,.08)}
    .med-inv-item:last-child{border-bottom:none}
    .med-inv-icon{width:48px;height:48px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:22px;flex-shrink:0}
    .med-inv-body{flex:1}
    .med-inv-name{font-size:16px;font-weight:700;color:var(--text)}
    .med-inv-dose{font-size:13px;color:var(--light);font-weight:600}
    .med-inv-bar-bg{width:100%;height:8px;background:#D4CABC;border-radius:100px;overflow:hidden;margin-top:8px}
    .med-inv-bar{height:100%;border-radius:100px;transition:width .8s ease}
    .med-inv-days{font-size:14px;font-weight:800;margin-top:6px;display:flex;align-items:center;gap:6px}
    .med-inv-days.critical{color:var(--storm-danger);animation:countdownPulse 2s ease-in-out infinite}
    .med-inv-days.low{color:var(--storm-warn)}
    .med-inv-days.ok{color:var(--storm-safe)}

    /* Checklist */
    .esc-check{display:flex;align-items:center;gap:14px;padding:14px 0;border-bottom:1px solid rgba(26,29,43,.08);cursor:pointer;transition:all .2s}
    .esc-check:last-child{border-bottom:none}
    .esc-check:hover{padding-left:4px}
    .esc-chk-box{width:44px;height:44px;border-radius:12px;border:3px solid rgba(44,47,62,.12);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:20px;transition:all .3s;background:transparent}
    .esc-chk-box.checked{border-color:var(--storm-safe);background:var(--storm-safe);color:white}
    .esc-check-body{flex:1}
    .esc-check-text{font-size:16px;font-weight:600;color:var(--text)}
    .esc-check-text.done-text{text-decoration:line-through;color:var(--light)}
    .esc-check-detail{font-size:13px;color:var(--light);font-weight:600;margin-top:2px}

    /* Document Vault */
    .doc-item{display:flex;align-items:center;gap:14px;padding:14px 0;border-bottom:1px solid rgba(26,29,43,.08)}
    .doc-item:last-child{border-bottom:none}
    .doc-icon{width:48px;height:48px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:22px;flex-shrink:0}
    .doc-body{flex:1}
    .doc-name{font-size:16px;font-weight:700;color:var(--text)}
    .doc-detail{font-size:13px;color:var(--light);font-weight:600}
    .doc-status{font-size:12px;font-weight:700;padding:4px 10px;border-radius:100px}
    .doc-uploaded{background:rgba(56,184,124,.08);color:var(--storm-safe)}
    .doc-missing{background:rgba(224,82,82,.08);color:var(--storm-danger)}

    /* Family Tree */
    .tree-member{display:flex;align-items:center;gap:14px;padding:14px 0;border-bottom:1px solid rgba(26,29,43,.08)}
    .tree-member:last-child{border-bottom:none}
    .tree-avatar{width:52px;height:52px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;color:white;font-weight:700;flex-shrink:0}
    .tree-body{flex:1}
    .tree-name{font-size:16px;font-weight:700;color:var(--text)}
    .tree-role{font-size:13px;color:var(--light);font-weight:600}
    .tree-contact{font-size:13px;color:var(--storm-accent);font-weight:600;margin-top:2px}
    .tree-priority{font-size:11px;font-weight:800;padding:3px 10px;border-radius:100px;letter-spacing:1px;text-transform:uppercase}
    .tree-p1{background:rgba(224,82,82,.08);color:var(--storm-danger)}
    .tree-p2{background:rgba(232,168,56,.08);color:var(--storm-warn)}
    .tree-p3{background:rgba(59,130,196,.08);color:var(--storm-accent)}

    /* Ration Calculator */
    .ration-card{background:linear-gradient(135deg,#F5EDD8,#F0E8D0);border:2px solid rgba(232,168,56,.2);border-radius:18px;padding:20px;margin-bottom:16px;text-align:center}
    .ration-title{font-family:var(--head);font-size:20px;font-weight:700;color:var(--text);margin-bottom:12px}
    .ration-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
    .ration-stat{padding:12px 8px}
    .ration-val{font-family:var(--head);font-size:28px;font-weight:700}
    .ration-label{font-size:12px;color:var(--muted);font-weight:600;margin-top:2px}

    /* Recovery Section */
    .recovery-item{display:flex;gap:14px;padding:14px 0;border-bottom:1px solid rgba(26,29,43,.08)}
    .recovery-item:last-child{border-bottom:none}
    .recovery-who{width:48px;height:48px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
    .recovery-body{flex:1}
    .recovery-task{font-size:16px;font-weight:700;color:var(--text)}
    .recovery-person{font-size:14px;color:var(--light);font-weight:600}
    .recovery-status{font-size:12px;font-weight:700;padding:4px 10px;border-radius:100px;margin-top:6px;display:inline-block}

    @media(max-width:560px){
      .fab-add{right:20px}.fab-ci{left:20px}
      .mood-btn{width:60px;height:76px;border-radius:16px}
      .mood-e{font-size:30px}.mood-lb{font-size:12px}
      .ci-mood-btn{width:60px;height:72px}
      .brand-title .ak{font-size:42px;letter-spacing:5px}
      .brand-title .wk{font-size:18px;letter-spacing:12px}
      .svc-card{padding:20px;gap:14px}.svc-icon{width:56px;height:56px;font-size:26px;border-radius:16px}
      .svc-title{font-size:20px}.svc-desc{font-size:15px}
      .storm-title{font-size:28px}
      .estoy-bien{min-height:100px}.estoy-bien-text{font-size:24px}
      .view-btn{font-size:13px;gap:4px;padding:10px 0}
      .ration-val{font-size:24px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- 3-TAB TOGGLE (always at top) -->
    <div class="view-toggle fi">
      <button class="view-btn act" id="viewServicios" onclick="switchView('servicios')">Servicios</button>
      <button class="view-btn" id="viewSenior" onclick="switchView('senior')">Mi D√≠a</button>
      <button class="view-btn" id="viewFamily" onclick="switchView('family')">Familia</button>
      <button class="view-btn" id="viewEscudo" onclick="switchView('escudo')">Escudo</button>
    </div>

    <!-- BRAND -->
    <div class="brand fi" id="brandHeader">
      <div class="brand-sym"><svg width="56" height="64" viewBox="0 0 56 64" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="shieldGold" x1="0" y1="0" x2="56" y2="64" gradientUnits="userSpaceOnUse">
            <stop offset="0%" stop-color="#E8C868"/>
            <stop offset="30%" stop-color="#F0D878"/>
            <stop offset="50%" stop-color="#FFE898"/>
            <stop offset="70%" stop-color="#F0D878"/>
            <stop offset="100%" stop-color="#C4A258"/>
          </linearGradient>
          <linearGradient id="shieldInner" x1="0" y1="8" x2="56" y2="56" gradientUnits="userSpaceOnUse">
            <stop offset="0%" stop-color="#C4A258" stop-opacity=".3"/>
            <stop offset="50%" stop-color="#F0D878" stop-opacity=".15"/>
            <stop offset="100%" stop-color="#C4A258" stop-opacity=".3"/>
          </linearGradient>
          <filter id="shieldGlow"><feDropShadow dx="0" dy="2" stdDeviation="6" flood-color="#C4A258" flood-opacity=".5"/></filter>
        </defs>
        <path d="M28 2L4 14V30C4 46 14 56 28 62C42 56 52 46 52 30V14L28 2Z" fill="url(#shieldGold)" filter="url(#shieldGlow)" stroke="rgba(255,232,152,.4)" stroke-width="1"/>
        <path d="M28 8L10 18V30C10 43 18 51 28 56C38 51 46 43 46 30V18L28 8Z" fill="url(#shieldInner)" stroke="rgba(255,232,152,.25)" stroke-width=".5"/>
        <path d="M22 32L26 36L35 26" stroke="#FFE898" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" fill="none" opacity=".9"/>
        <path d="M28 12L14 20V30C14 40 20 48 28 52C36 48 42 40 42 30V20L28 12Z" fill="none" stroke="rgba(255,232,152,.12)" stroke-width=".5"/>
      </svg></div>
      <h1 class="brand-title"><span class="ak">AKASHIC</span><span class="wk">Works</span></h1>
      <hr class="brand-line"><p class="brand-tag">Mi D√≠a <span style="color:rgba(196,162,88,.5)">¬∑</span> Familia <span style="color:rgba(196,162,88,.5)">¬∑</span> Escudo</p>
      <div class="brand-accent-line"></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê SENIOR VIEW ‚ïê‚ïê‚ïê -->
    <div id="seniorView" class="hidden">
      <div class="saludo fi d2" id="saludo">
        <button class="sound-toggle" id="soundBtn" aria-label="Sonido">üîä</button>
        <p class="fecha" id="fecha"></p><h1 class="saludo-h" id="saludoText"></h1>
        <p class="saludo-msg" id="mensajeDiario"></p>
      </div>
      <div class="section-divider"><div class="section-divider-line"></div><span class="section-divider-text">Tu D√≠a</span><div class="section-divider-line"></div></div>
      <div class="prog"><div class="prog-row"><span class="prog-lbl">Progreso de Hoy</span><span class="prog-num" id="progNum">0/0</span></div><div class="prog-bg"><div class="prog-fill" id="progFill"></div></div><p class="prog-txt" id="progTxt"></p></div>
      <div class="mood"><h2 class="mood-h">¬øC√≥mo te sientes? üíõ</h2><div class="mood-grid" id="moodGrid"></div><p class="mood-resp" id="moodResp"></p></div>
      <div class="tabs"><button class="tab-b act" id="tabHoy" onclick="switchTab('hoy')">Pendientes (0)</button><button class="tab-b" id="tabListo" onclick="switchTab('listo')">Hechos (0)</button></div>
      <div class="aform" id="addForm"><label class="flbl">¬øQu√© te recuerdo?</label><input class="finp" id="newText" type="text" placeholder="Ej: Tomar medicina de la noche..."><label class="flbl">¬øA qu√© hora?</label><select class="fsel" id="newTime"></select><label class="flbl">Categor√≠a</label><div class="cpills" id="catPills"></div><div class="fbtns"><button class="btn-cancel" onclick="toggleForm()">Cancelar</button><button class="btn-go" onclick="addReminder()">Agregar ‚úì</button></div></div>
      <div id="reminderList"></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê SERVICIOS VIEW ‚ïê‚ïê‚ïê -->
    <div id="serviciosView">
      <div class="services-intro"><h2 class="services-intro-h">Nuestros Servicios</h2><hr class="services-intro-line"><p class="services-intro-p">Apoyo real para la vida diaria. T√∫ descansas, nosotros nos encargamos.</p></div>
      <div class="svc-card svc-medical"><div class="svc-icon">üìû</div><div class="svc-body"><div class="svc-num">Servicio 01</div><div class="svc-title">Citas M√©dicas y Diligencias</div><div class="svc-desc">Hacemos las llamadas por ti. Coordinamos citas con doctores, laboratorios, farmacias y oficinas de gobierno.</div><span class="svc-tag">Por Tel√©fono</span></div></div>
      <div class="svc-card svc-calls"><div class="svc-icon">üîî</div><div class="svc-body"><div class="svc-num">Servicio 02</div><div class="svc-title">Llamadas y Seguimiento</div><div class="svc-desc">Te recordamos tus citas, medicamentos y compromisos. Seguimiento despu√©s de cada visita m√©dica.</div><span class="svc-tag">Nunca se te olvida</span></div></div>
      <div class="svc-card svc-payments"><div class="svc-icon">üí≥</div><div class="svc-body"><div class="svc-num">Servicio 03</div><div class="svc-title">Pagos Sin Tocar Dinero</div><div class="svc-desc">Pagos de servicios, facturas y suscripciones de forma segura y digital. Sin filas, sin confusi√≥n.</div><span class="svc-tag">Seguro y Digital</span></div></div>
      <div class="svc-card svc-transport"><div class="svc-icon">üöó</div><div class="svc-body"><div class="svc-num">Servicio 04</div><div class="svc-title">Coordinar Transportaci√≥n</div><div class="svc-desc">Transporte a citas, terapias y actividades. Uber, familiar, o servicio comunitario ‚Äî todo coordinado.</div><span class="svc-tag">Puerta a Puerta</span></div></div>
      <div class="svc-card svc-forms"><div class="svc-icon">üìã</div><div class="svc-body"><div class="svc-num">Servicio 05</div><div class="svc-title">Formularios y Documentos</div><div class="svc-desc">Formularios m√©dicos, solicitudes de beneficios, renovaciones y documentos importantes. Todo a tiempo.</div><span class="svc-tag">Sin Estr√©s</span></div></div>
      <div class="svc-card svc-daily"><div class="svc-icon">üìÖ</div><div class="svc-body"><div class="svc-num">Servicio 06</div><div class="svc-title">Organizaci√≥n Diaria</div><div class="svc-desc">Rutina personalizada. Medicamentos, comidas, ejercicio, descanso ‚Äî todo en su momento, sin presi√≥n.</div><span class="svc-tag">Tu Ritmo</span></div></div>
      <div class="svc-card svc-family"><div class="svc-icon">üë®‚Äçüë©‚Äçüëß</div><div class="svc-body"><div class="svc-num">Servicio 07</div><div class="svc-title">Apoyo a Familias</div><div class="svc-desc">Familia informada y tranquila. Reportes de bienestar, coordinaci√≥n de visitas, comunicaci√≥n clara.</div><span class="svc-tag">Familia Conectada</span></div></div>
      <div class="svc-card svc-trust"><div class="svc-icon">ü§ù</div><div class="svc-body"><div class="svc-num">Servicio 08</div><div class="svc-title">C√≥mo Generar Confianza</div><div class="svc-desc">Pres√©ntate con seguridad ante m√©dicos y proveedores. Comunicaci√≥n clara y apoyo de tu lado.</div><span class="svc-tag">T√∫ al Mando</span></div></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê FAMILY VIEW ‚ïê‚ïê‚ïê -->
    <div id="familyView" class="hidden">
      <div class="fam-header fi"><div class="fam-header-label">Portal de Familia</div><div class="fam-header-name">Mar√≠a del Carmen</div><div class="fam-header-status"><span class="fam-status-dot"></span> Activa hoy</div><div class="fam-header-updated">√öltima actividad: hace 23 minutos</div></div>
      <div class="alert-section">
        <div class="alert-card alert-urgent fi d1"><span class="alert-icon">‚ö†Ô∏è</span><div class="alert-body"><div class="alert-title">Medicamento No Tomado</div><div class="alert-desc">Lisinopril 10mg ‚Äî dosis de la ma√±ana</div><div class="alert-time">Programado: 8:00 AM ¬∑ Hace 2 horas</div></div></div>
        <div class="alert-card alert-warn fi d2"><span class="alert-icon">üìã</span><div class="alert-body"><div class="alert-title">Formulario Pendiente</div><div class="alert-desc">Renovaci√≥n Mi Salud ‚Äî vence en 5 d√≠as</div></div></div>
        <div class="alert-card alert-info fi d3"><span class="alert-icon">‚úÖ</span><div class="alert-body"><div class="alert-title">Cita Confirmada</div><div class="alert-desc">Dr. Rodr√≠guez ‚Äî Cardiolog√≠a, 14 de febrero</div></div></div>
      </div>
      <div class="fam-section fi d4"><div class="fam-section-h">üìä Resumen de Bienestar</div><div class="fam-section-sub">C√≥mo va el d√≠a de hoy</div><div class="wellness-grid"><div class="wellness-stat"><div class="wellness-stat-icon">üòä</div><div class="wellness-stat-val" style="color:var(--green)">Bien</div><div class="wellness-stat-label">√Ånimo de Hoy</div></div><div class="wellness-stat"><div class="wellness-stat-icon">‚úÖ</div><div class="wellness-stat-val" id="famTaskCount">4/6</div><div class="wellness-stat-label">Tareas Completadas</div></div><div class="wellness-stat"><div class="wellness-stat-icon">üíä</div><div class="wellness-stat-val" style="color:var(--red)">2/3</div><div class="wellness-stat-label">Medicamentos</div></div><div class="wellness-stat"><div class="wellness-stat-icon">üö∂</div><div class="wellness-stat-val" style="color:var(--teal)">15 min</div><div class="wellness-stat-label">Movimiento</div></div></div><div style="margin-top:20px"><div class="fam-section-sub" style="margin-bottom:10px">√Ånimo de la semana</div><div class="mood-timeline" id="moodTimeline"></div></div></div>
      <div class="fam-section fi d5"><div class="fam-section-h">üóìÔ∏è Citas y Seguimientos</div><div class="fam-section-sub">Pr√≥ximas citas m√©dicas</div><div class="appt-item"><div class="appt-date"><span class="appt-date-month">Feb</span><span class="appt-date-day">14</span></div><div class="appt-body"><div class="appt-title">Dr. Rodr√≠guez ‚Äî Cardiolog√≠a</div><div class="appt-detail">Hospital Auxilio Mutuo ¬∑ 10:00 AM</div><span class="appt-status appt-confirmed">‚úì Confirmada</span></div></div><div class="appt-item"><div class="appt-date"><span class="appt-date-month">Feb</span><span class="appt-date-day">20</span></div><div class="appt-body"><div class="appt-title">Laboratorio ‚Äî An√°lisis de Sangre</div><div class="appt-detail">Quest Diagnostics, Hato Rey ¬∑ 7:30 AM</div><span class="appt-status appt-pending">‚è≥ Pendiente</span></div></div></div>
      <div class="fam-section fi d6"><div class="fam-section-h">üíä Medicamentos</div><div class="fam-section-sub">Estado de hoy</div><div class="med-item"><div class="med-icon" style="background:rgba(184,61,32,.1)">üíä</div><div class="med-body"><div class="med-name">Lisinopril 10mg</div><div class="med-dose">Presi√≥n arterial</div><div class="med-schedule"><span class="med-time missed">8:00 AM ‚úï</span><span class="med-time">8:00 PM</span></div></div></div><div class="med-item"><div class="med-icon" style="background:rgba(46,125,82,.1)">üíä</div><div class="med-body"><div class="med-name">Metformina 500mg</div><div class="med-dose">Diabetes</div><div class="med-schedule"><span class="med-time taken">8:00 AM ‚úì</span><span class="med-time taken">12:00 PM ‚úì</span><span class="med-time">6:00 PM</span></div></div></div><div class="med-item"><div class="med-icon" style="background:rgba(91,77,143,.1)">üíä</div><div class="med-body"><div class="med-name">Omeprazol 20mg</div><div class="med-dose">Est√≥mago</div><div class="med-schedule"><span class="med-time taken">6:30 AM ‚úì</span></div></div></div></div>
      <div class="fam-section fi d7"><div class="fam-section-h">üí¨ Mensajes</div><div class="fam-section-sub">Comunicaci√≥n familia-cuidador</div><div class="msg-item"><div class="msg-header"><span class="msg-author"><span class="msg-avatar" style="background:var(--purple)">C</span>Cuidador</span><span class="msg-time-label">Hoy, 9:15 AM</span></div><div class="msg-text">Mar√≠a desayun√≥ bien. Not√© que no quiso el Lisinopril ‚Äî dice que le da mareo. Le recordar√© con el almuerzo.</div></div><div class="msg-item"><div class="msg-header"><span class="msg-author"><span class="msg-avatar" style="background:var(--orange)">L</span>Laura (hija)</span><span class="msg-time-label">Hoy, 9:42 AM</span></div><div class="msg-text">Gracias. El doctor dijo que puede tomarla con comida si le da mareo. La llamo a las 2.</div></div><div class="msg-input-wrap"><input class="msg-input" id="msgInput" type="text" placeholder="Escribir mensaje..."><button class="msg-send" onclick="sendMsg()" aria-label="Enviar">‚û§</button></div></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üåÄ ESCUDO BORICUA VIEW
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="escudoView" class="hidden">

      <!-- ESTOY BIEN ‚Äî THE HERO -->
      <div class="estoy-bien-wrap">
        <button class="estoy-bien" id="estoyBienBtn" onclick="sendEstoyBien()">
          <span class="estoy-bien-icon">üíö</span>
          <span class="estoy-bien-text">ESTOY BIEN</span>
          <span class="estoy-bien-sub">Toca para avisar a tu familia</span>
        </button>
      </div>
      <div id="bienConfirm"></div>

      <!-- Storm Status Header -->
      <div class="storm-header">
        <div class="storm-badge"><span class="storm-badge-dot"></span> Sistema Activo</div>
        <div class="storm-title"><span class="esc-icon">üõ°Ô∏è</span> Escudo Boricua</div>
        <div class="storm-subtitle">Sistema de Emergencia para Familias</div>
        <div class="storm-status">
          <div class="storm-status-row">
            <span class="storm-status-label">Estado</span>
            <span class="storm-status-val safe">üü¢ Sin Amenaza Activa</span>
          </div>
          <div class="storm-status-row">
            <span class="storm-status-label">Temporada</span>
            <span class="storm-status-val">Jun 1 ‚Äì Nov 30, 2026</span>
          </div>
          <div class="storm-status-row">
            <span class="storm-status-label">Preparaci√≥n</span>
            <span class="storm-status-val caution">72% Listo</span>
          </div>
        </div>
      </div>

      <!-- Medication Inventory Countdown -->
      <div class="esc-section">
        <div class="esc-section-h">üíä Inventario de Medicamentos</div>
        <div class="esc-section-sub">¬øCu√°ntos d√≠as te quedan? Planifica antes de la tormenta.</div>
        <div class="med-inv-item">
          <div class="med-inv-icon" style="background:rgba(224,82,82,.08)">üíä</div>
          <div class="med-inv-body">
            <div class="med-inv-name">Lisinopril 10mg</div>
            <div class="med-inv-dose">Presi√≥n arterial ‚Äî 2 veces al d√≠a</div>
            <div class="med-inv-bar-bg"><div class="med-inv-bar" style="width:20%;background:var(--storm-danger)"></div></div>
            <div class="med-inv-days critical">‚ö†Ô∏è 4 d√≠as restantes ‚Äî ¬°REABASTECE AHORA!</div>
          </div>
        </div>
        <div class="med-inv-item">
          <div class="med-inv-icon" style="background:rgba(232,168,56,.08)">üíä</div>
          <div class="med-inv-body">
            <div class="med-inv-name">Metformina 500mg</div>
            <div class="med-inv-dose">Diabetes ‚Äî 3 veces al d√≠a</div>
            <div class="med-inv-bar-bg"><div class="med-inv-bar" style="width:45%;background:var(--storm-warn)"></div></div>
            <div class="med-inv-days low">‚è≥ 9 d√≠as restantes</div>
          </div>
        </div>
        <div class="med-inv-item">
          <div class="med-inv-icon" style="background:rgba(56,184,124,.08)">üíä</div>
          <div class="med-inv-body">
            <div class="med-inv-name">Omeprazol 20mg</div>
            <div class="med-inv-dose">Est√≥mago ‚Äî 1 vez al d√≠a</div>
            <div class="med-inv-bar-bg"><div class="med-inv-bar" style="width:80%;background:var(--storm-safe)"></div></div>
            <div class="med-inv-days ok">‚úÖ 24 d√≠as restantes</div>
          </div>
        </div>

        <!-- Ration Calculator -->
        <div class="ration-card" style="margin-top:18px">
          <div class="ration-title">üìä Si pierdes acceso a farmacia:</div>
          <div class="ration-grid">
            <div class="ration-stat"><div class="ration-val" style="color:var(--storm-danger)">4</div><div class="ration-label">D√≠as Cr√≠ticos<br>(Lisinopril)</div></div>
            <div class="ration-stat"><div class="ration-val" style="color:var(--storm-warn)">9</div><div class="ration-label">D√≠as Alerta<br>(Metformina)</div></div>
            <div class="ration-stat"><div class="ration-val" style="color:var(--storm-safe)">24</div><div class="ration-label">D√≠as Seguro<br>(Omeprazol)</div></div>
          </div>
        </div>
      </div>

      <!-- Emergency Checklist -->
      <div class="esc-section">
        <div class="esc-section-h">‚úÖ Checklist de Emergencia</div>
        <div class="esc-section-sub">Generado autom√°ticamente del perfil de salud de Mar√≠a</div>
        <div id="escChecklist"></div>
      </div>

      <!-- Document Vault -->
      <div class="esc-section">
        <div class="esc-section-h">üîí B√≥veda de Documentos</div>
        <div class="esc-section-sub">Todo digitalizado y accesible sin internet</div>
        <div class="doc-item">
          <div class="doc-icon" style="background:rgba(56,184,124,.08)">ü™™</div>
          <div class="doc-body"><div class="doc-name">Identificaci√≥n (Real ID)</div><div class="doc-detail">Escaneada el 15 de enero</div></div>
          <span class="doc-status doc-uploaded">‚úì Guardado</span>
        </div>
        <div class="doc-item">
          <div class="doc-icon" style="background:rgba(56,184,124,.08)">üí≥</div>
          <div class="doc-body"><div class="doc-name">Tarjeta Mi Salud</div><div class="doc-detail">Vigente hasta dic 2026</div></div>
          <span class="doc-status doc-uploaded">‚úì Guardado</span>
        </div>
        <div class="doc-item">
          <div class="doc-icon" style="background:rgba(56,184,124,.08)">üìÑ</div>
          <div class="doc-body"><div class="doc-name">Lista de Medicamentos</div><div class="doc-detail">Actualizada hoy</div></div>
          <span class="doc-status doc-uploaded">‚úì Guardado</span>
        </div>
        <div class="doc-item">
          <div class="doc-icon" style="background:rgba(224,82,82,.08)">üè•</div>
          <div class="doc-body"><div class="doc-name">P√≥liza de Seguro</div><div class="doc-detail">No se ha subido</div></div>
          <span class="doc-status doc-missing">Falta</span>
        </div>
        <div class="doc-item">
          <div class="doc-icon" style="background:rgba(224,82,82,.08)">üìù</div>
          <div class="doc-body"><div class="doc-name">Directriz Anticipada</div><div class="doc-detail">Documento legal de voluntad</div></div>
          <span class="doc-status doc-missing">Falta</span>
        </div>
      </div>

      <!-- Family Emergency Tree -->
      <div class="esc-section">
        <div class="esc-section-h">üå≥ √Årbol de Emergencia</div>
        <div class="esc-section-sub">Qui√©n llama a qui√©n. Orden de contacto en crisis.</div>
        <div class="tree-member">
          <div class="tree-avatar" style="background:var(--storm-danger)">L</div>
          <div class="tree-body"><div class="tree-name">Laura Mart√≠nez</div><div class="tree-role">Hija ¬∑ Orlando, FL</div><div class="tree-contact">üì± (407) 555-0134</div></div>
          <span class="tree-priority tree-p1">1¬∞</span>
        </div>
        <div class="tree-member">
          <div class="tree-avatar" style="background:var(--storm-warn)">R</div>
          <div class="tree-body"><div class="tree-name">Roberto Mart√≠nez</div><div class="tree-role">Hijo ¬∑ San Juan, PR</div><div class="tree-contact">üì± (787) 555-0198</div></div>
          <span class="tree-priority tree-p2">2¬∞</span>
        </div>
        <div class="tree-member">
          <div class="tree-avatar" style="background:var(--storm-accent)">D</div>
          <div class="tree-body"><div class="tree-name">Do√±a Carmen</div><div class="tree-role">Vecina ¬∑ Bayam√≥n</div><div class="tree-contact">üì± (787) 555-0221</div></div>
          <span class="tree-priority tree-p3">3¬∞</span>
        </div>
      </div>

      <!-- Post-Storm Recovery -->
      <div class="esc-section">
        <div class="esc-section-h">üîß Recuperaci√≥n Post-Tormenta</div>
        <div class="esc-section-sub">Qui√©n hace qu√© despu√©s del evento</div>
        <div class="recovery-item">
          <div class="recovery-who" style="background:rgba(56,184,124,.08)">üíß</div>
          <div class="recovery-body"><div class="recovery-task">Traer agua y suministros</div><div class="recovery-person">Roberto (hijo) ‚Äî vive cerca</div><span class="recovery-status" style="background:rgba(56,184,124,.08);color:var(--storm-safe)">Asignado</span></div>
        </div>
        <div class="recovery-item">
          <div class="recovery-who" style="background:rgba(59,130,196,.08)">üè•</div>
          <div class="recovery-body"><div class="recovery-task">Contactar m√©dico si falla medicamento</div><div class="recovery-person">Laura (hija) ‚Äî coordinadora</div><span class="recovery-status" style="background:rgba(59,130,196,.08);color:var(--storm-accent)">Asignado</span></div>
        </div>
        <div class="recovery-item">
          <div class="recovery-who" style="background:rgba(232,168,56,.08)">üè†</div>
          <div class="recovery-body"><div class="recovery-task">Verificar techo y electricidad</div><div class="recovery-person">Do√±a Carmen (vecina)</div><span class="recovery-status" style="background:rgba(232,168,56,.08);color:var(--storm-warn)">Pendiente</span></div>
        </div>
        <div class="recovery-item">
          <div class="recovery-who" style="background:rgba(91,77,143,.1)">üìã</div>
          <div class="recovery-body"><div class="recovery-task">Solicitar ayuda FEMA</div><div class="recovery-person">Akashic Works ‚Äî asistencia con formularios</div><span class="recovery-status" style="background:rgba(123,109,175,.08);color:var(--purple)">Servicio Incluido</span></div>
        </div>
      </div>

    </div><!-- end escudoView -->

    <div class="footer"><div class="footer-b">AKASHIC WORKS</div><div class="footer-s">cuidando lo que importa</div></div>
    <button class="fab-ci hidden" id="fabCI" onclick="openCheckin()">üíú ¬øC√≥mo vas?</button>
    <button class="fab-add hidden" id="fabAdd" onclick="toggleForm()">+</button>
    <div class="overlay" id="checkinOverlay" onclick="closeCheckinBg(event)"><div class="sheet"><div class="handle"></div><div id="checkinContent"><h2 class="ci-t">Tu Momento üåø</h2><p class="ci-sub">T√≥mate un momento para ti. ¬øC√≥mo va tu d√≠a?</p><label class="flbl">¬øC√≥mo te sientes ahora?</label><div class="ci-mood-grid" id="ciMoodGrid"></div><label class="flbl">¬øAlgo en tu mente? (opcional)</label><textarea class="ci-ta" id="ciNote" placeholder="Me siento..."></textarea><button class="btn-go" style="width:100%;padding:18px;font-size:18px" onclick="submitCheckin()">Enviar Check-in üíõ</button></div><div id="checkinSuccess" class="hidden"><div class="ci-ok"><div class="ci-ok-e">üíú</div><div class="ci-ok-t">Gracias por registrarte.</div><p class="ci-ok-sub">Est√°s haciendo algo hermoso por ti.</p></div></div></div></div>
  </div>

  <script>
    let soundOn=true,currentTab='hoy',currentMood=null,ciMood=null,confirmDelId=null,formOpen=false,newCat='personal',currentView='servicios',bienSent=false;
    const CATS=[{id:'salud',label:'Salud',icon:'üíä',color:'#B83D20'},{id:'comida',label:'Comida',icon:'üçΩÔ∏è',color:'#2E7D52'},{id:'movimiento',label:'Movimiento',icon:'üö∂',color:'#8A6C2C'},{id:'social',label:'Social',icon:'üí¨',color:'#2D3048'},{id:'descanso',label:'Descanso',icon:'üò¥',color:'#5B4D8F'},{id:'personal',label:'Personal',icon:'‚ú®',color:'#A45E35'}];
    const MENSAJES=["Lo est√°s haciendo bien. Un paso a la vez. üåø","Tu bienestar importa. Gracias por estar presente. ‚òÄÔ∏è","Est√° bien ir despacio. Vas a tu tiempo.","Cuidarte es un acto de amor propio. üíõ","Hoy es un buen d√≠a para ser bueno contigo. üå∫","Cada peque√±a acci√≥n suma algo hermoso.","Respira profundo. T√∫ puedes con esto. üåä","No tienes que ser perfecto. Solo tienes que ser t√∫. ü§ô"];
    const MOODS=[{emoji:'üòä',label:'Genial',val:'genial'},{emoji:'üôÇ',label:'Bien',val:'bien'},{emoji:'üòê',label:'Ah√≠',val:'ahi'},{emoji:'üòî',label:'Bajito',val:'bajito'},{emoji:'üò∞',label:'Dif√≠cil',val:'dificil'}];
    const MOOD_RESP={genial:'¬°Qu√© bueno! Vamos con esa energ√≠a. üåü',bien:'Me alegra escuchar eso. Vas muy bien. üíö',ahi:'Est√° bien. Cada d√≠a es diferente. üå§Ô∏è',bajito:'Estoy aqu√≠ contigo. S√© amable contigo hoy. üíõ',dificil:'Siento que est√© dif√≠cil. No est√°s solo/a. ü§ó'};
    const HORAS=['6:00 AM','6:30 AM','7:00 AM','7:30 AM','8:00 AM','8:30 AM','9:00 AM','9:30 AM','10:00 AM','10:30 AM','11:00 AM','11:30 AM','12:00 PM','12:30 PM','1:00 PM','1:30 PM','2:00 PM','2:30 PM','3:00 PM','3:30 PM','4:00 PM','4:30 PM','5:00 PM','5:30 PM','6:00 PM','6:30 PM','7:00 PM','7:30 PM','8:00 PM','8:30 PM','9:00 PM','9:30 PM','10:00 PM'];
    let reminders=[{id:1,text:'Tomar medicamento de la ma√±ana',time:'8:00 AM',cat:'salud',done:false},{id:2,text:'Tomar un vaso de agua',time:'9:00 AM',cat:'salud',done:false},{id:3,text:'Almorzar algo nutritivo',time:'12:00 PM',cat:'comida',done:false},{id:4,text:'Caminar 15 minutos',time:'2:00 PM',cat:'movimiento',done:false},{id:5,text:'Llamar a un familiar o amigo',time:'4:00 PM',cat:'social',done:false},{id:6,text:'Relajarse ‚Äî sin pantallas',time:'9:00 PM',cat:'descanso',done:false}];

    const ESC_CHECKS=[
      {id:1,text:'Agua embotellada (1 gal√≥n/d√≠a √ó 7 d√≠as)',detail:'M√≠nimo 7 galones para Mar√≠a',done:false},
      {id:2,text:'Medicamentos extra (30 d√≠as)',detail:'Lisinopril necesita reabastecimiento URGENTE',done:false},
      {id:3,text:'Linterna y bater√≠as extras',detail:'Verificar que funcionen',done:true},
      {id:4,text:'Radio de bater√≠as (AM/FM)',detail:'Para alertas de NOAA',done:false},
      {id:5,text:'Comida no perecedera (7 d√≠as)',detail:'Considerar dieta diab√©tica de Mar√≠a',done:true},
      {id:6,text:'Cargador port√°til para celular',detail:'M√≠nimo 20,000 mAh',done:true},
      {id:7,text:'Documentos en B√≥veda Digital',detail:'3 de 5 documentos guardados',done:false},
      {id:8,text:'Plan de evacuaci√≥n establecido',detail:'Ruta a casa de Roberto en San Juan',done:false},
      {id:9,text:'Vecinos notificados del plan',detail:'Do√±a Carmen = contacto local',done:true},
      {id:10,text:'Kit de primeros auxilios',detail:'Incluir gluc√≥metro y tiras',done:false},
    ];

    function playTone(t){if(!soundOn)return;try{const c=new(window.AudioContext||window.webkitAudioContext)(),o=c.createOscillator(),g=c.createGain();o.connect(g);g.connect(c.destination);if(t==='complete'){o.type='triangle';o.frequency.setValueAtTime(280,c.currentTime);o.frequency.exponentialRampToValueAtTime(120,c.currentTime+.15);g.gain.setValueAtTime(.4,c.currentTime);g.gain.exponentialRampToValueAtTime(.01,c.currentTime+.2);o.start(c.currentTime);o.stop(c.currentTime+.2)}else if(t==='undo'){o.type='sine';o.frequency.setValueAtTime(200,c.currentTime);g.gain.setValueAtTime(.2,c.currentTime);g.gain.exponentialRampToValueAtTime(.01,c.currentTime+.12);o.start(c.currentTime);o.stop(c.currentTime+.12)}else if(t==='add'){o.type='triangle';o.frequency.setValueAtTime(400,c.currentTime);o.frequency.exponentialRampToValueAtTime(180,c.currentTime+.12);g.gain.setValueAtTime(.35,c.currentTime);g.gain.exponentialRampToValueAtTime(.01,c.currentTime+.18);o.start(c.currentTime);o.stop(c.currentTime+.18)}else if(t==='checkin'){const o2=c.createOscillator(),g2=c.createGain();o2.connect(g2);g2.connect(c.destination);o.type='sine';o2.type='sine';o.frequency.setValueAtTime(260,c.currentTime);o2.frequency.setValueAtTime(330,c.currentTime);g.gain.setValueAtTime(.25,c.currentTime);g2.gain.setValueAtTime(.2,c.currentTime);g.gain.exponentialRampToValueAtTime(.01,c.currentTime+.5);g2.gain.exponentialRampToValueAtTime(.01,c.currentTime+.5);o.start(c.currentTime);o2.start(c.currentTime);o.stop(c.currentTime+.5);o2.stop(c.currentTime+.5)}else if(t==='mood'){o.type='sine';o.frequency.setValueAtTime(320,c.currentTime);g.gain.setValueAtTime(.15,c.currentTime);g.gain.exponentialRampToValueAtTime(.01,c.currentTime+.15);o.start(c.currentTime);o.stop(c.currentTime+.15)}else if(t==='safe'){const o2=c.createOscillator(),g2=c.createGain(),o3=c.createOscillator(),g3=c.createGain();o2.connect(g2);g2.connect(c.destination);o3.connect(g3);g3.connect(c.destination);o.type='sine';o2.type='sine';o3.type='sine';o.frequency.setValueAtTime(330,c.currentTime);o2.frequency.setValueAtTime(415,c.currentTime+.15);o3.frequency.setValueAtTime(523,c.currentTime+.3);[g,g2,g3].forEach((gn,i)=>{gn.gain.setValueAtTime(.3,c.currentTime+i*.15);gn.gain.exponentialRampToValueAtTime(.01,c.currentTime+.8)});o.start(c.currentTime);o2.start(c.currentTime+.15);o3.start(c.currentTime+.3);o.stop(c.currentTime+.8);o2.stop(c.currentTime+.8);o3.stop(c.currentTime+.8)}}catch(e){}}

    /* View Toggle */
    function switchView(v){
      currentView=v;
      document.getElementById('seniorView').classList.toggle('hidden',v!=='senior');
      document.getElementById('serviciosView').classList.toggle('hidden',v!=='servicios');
      document.getElementById('familyView').classList.toggle('hidden',v!=='family');
      document.getElementById('escudoView').classList.toggle('hidden',v!=='escudo');
      document.getElementById('viewServicios').className='view-btn'+(v==='servicios'?' act':'');
      document.getElementById('viewSenior').className='view-btn'+(v==='senior'?' act':'');
      document.getElementById('viewFamily').className='view-btn'+(v==='family'?' act fam-active':'');
      document.getElementById('viewEscudo').className='view-btn'+(v==='escudo'?' act esc-active':'');
      document.getElementById('fabAdd').classList.toggle('hidden',v!=='senior');
      document.getElementById('fabCI').classList.toggle('hidden',v!=='senior');
      if(v==='family')buildMoodTimeline();
      if(v==='escudo')renderEscChecklist();
      function forceTop(){
        var target=document.getElementById(v==='senior'?'seniorView':v==='family'?'familyView':'escudoView');
        if(target)target.scrollIntoView({block:'start',behavior:'instant'});
        window.scrollTo(0,0);document.documentElement.scrollTop=0;document.body.scrollTop=0;
        var el=target||document.querySelector('.view-toggle');
        if(el){var p=el.parentElement;while(p){if(p.scrollTop>0)p.scrollTop=0;p=p.parentElement;}}
      }
      forceTop();requestAnimationFrame(forceTop);setTimeout(forceTop,0);setTimeout(forceTop,50);setTimeout(forceTop,100);
    }

    /* ESTOY BIEN */
    function sendEstoyBien(){
      if(bienSent)return;
      bienSent=true;
      playTone('safe');
      const btn=document.getElementById('estoyBienBtn');
      btn.classList.add('sent');
      btn.innerHTML='<span class="estoy-bien-icon">‚úÖ</span><span class="estoy-bien-text">¬°FAMILIA NOTIFICADA!</span><span class="estoy-bien-sub">Laura, Roberto y Do√±a Carmen recibieron tu se√±al</span>';
      const now=new Date();
      const h=now.getHours(),m=now.getMinutes();
      const ts=`${h>12?h-12:h}:${m<10?'0'+m:m} ${h>=12?'PM':'AM'}`;
      document.getElementById('bienConfirm').innerHTML=`<div class="bien-confirm"><div class="bien-confirm-icon">üíö</div><div class="bien-confirm-text">Se√±al enviada a las ${ts}</div><div class="bien-confirm-sub">3 contactos notificados ¬∑ GPS compartido</div></div>`;
    }

    /* Emergency Checklist */
    function renderEscChecklist(){
      const el=document.getElementById('escChecklist');
      const done=ESC_CHECKS.filter(c=>c.done).length;
      const tot=ESC_CHECKS.length;
      let h=`<div style="margin-bottom:14px;font-size:15px;font-weight:700;color:var(--muted)">${done} de ${tot} completados (${Math.round(done/tot*100)}%)</div>`;
      h+=`<div style="width:100%;height:8px;background:#D4CABC;border-radius:100px;overflow:hidden;margin-bottom:18px"><div style="height:100%;width:${done/tot*100}%;border-radius:100px;background:linear-gradient(90deg,var(--storm-safe),#4AC88E);transition:width .6s ease"></div></div>`;
      ESC_CHECKS.forEach(c=>{
        h+=`<div class="esc-check" onclick="toggleEscCheck(${c.id})">
          <div class="esc-chk-box${c.done?' checked':''}">${c.done?'‚úì':''}</div>
          <div class="esc-check-body">
            <div class="esc-check-text${c.done?' done-text':''}">${c.text}</div>
            <div class="esc-check-detail">${c.detail}</div>
          </div></div>`;
      });
      el.innerHTML=h;
    }
    function toggleEscCheck(id){
      const c=ESC_CHECKS.find(c=>c.id===id);
      if(c){c.done=!c.done;playTone(c.done?'complete':'undo')}
      renderEscChecklist();
    }

    /* Mood Timeline */
    function buildMoodTimeline(){
      const days=['Lun','Mar','Mi√©','Jue','Vie','S√°b','Dom'];
      const moods=['üòä','üôÇ','üòä','üòê','üôÇ','üòä','üôÇ'];
      const today=new Date().getDay();const todayIdx=today===0?6:today-1;
      document.getElementById('moodTimeline').innerHTML=days.map((d,i)=>`<div class="mood-day"><div class="mood-day-label">${d}</div><div class="mood-day-emoji${i===todayIdx?' today':''}">${i<=todayIdx?moods[i]:'‚Äî'}</div></div>`).join('');
    }

    /* Messages */
    function sendMsg(){
      const input=document.getElementById('msgInput');const text=input.value.trim();if(!text)return;
      const wrap=document.querySelector('.msg-input-wrap');const msg=document.createElement('div');
      msg.className='msg-item';msg.style.animation='fu .3s ease forwards';
      const now=new Date(),h=now.getHours(),m=now.getMinutes();
      msg.innerHTML=`<div class="msg-header"><span class="msg-author"><span class="msg-avatar" style="background:var(--blue)">T</span>T√∫</span><span class="msg-time-label">Ahora, ${h>12?h-12:h}:${m<10?'0'+m:m} ${h>=12?'PM':'AM'}</span></div><div class="msg-text">${text}</div>`;
      wrap.parentNode.insertBefore(msg,wrap);input.value='';playTone('add');
    }

    function gc(id){return CATS.find(c=>c.id===id)?.color||'#999'}
    function formatFecha(d){const dias=['Domingo','Lunes','Martes','Mi√©rcoles','Jueves','Viernes','S√°bado'],meses=['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre','diciembre'];return`${dias[d.getDay()]}, ${d.getDate()} de ${meses[d.getMonth()]}`}
    function getSaludo(){const h=new Date().getHours();return h<12?'Buenos d√≠as':h<17?'Buenas tardes':'Buenas noches'}

    function render(){
      const dn=reminders.filter(r=>r.done).length,tot=reminders.length,pct=tot>0?(dn/tot)*100:0;
      const pend=reminders.filter(r=>!r.done),comp=reminders.filter(r=>r.done);
      document.getElementById('progNum').textContent=`${dn}/${tot}`;
      document.getElementById('progFill').style.width=`${pct}%`;
      const pt=document.getElementById('progTxt');
      if(dn>0&&dn<tot)pt.textContent=dn===1?'¬°Buen comienzo!':`¬°Ya van ${dn}! Sigue as√≠.`;
      else if(dn===tot&&tot>0)pt.textContent='üéâ ¬°Completaste todo! ¬°Tremendo!';else pt.textContent='';
      document.getElementById('tabHoy').textContent=`Pendientes (${pend.length})`;
      document.getElementById('tabListo').textContent=`Hechos (${comp.length})`;
      document.getElementById('famTaskCount').textContent=`${dn}/${tot}`;
      const list=document.getElementById('reminderList'),items=currentTab==='hoy'?pend:comp;
      if(!items.length){const m=currentTab==='hoy'?'<div class="empty-e">üéâ</div><div class="empty-t">¬°Todo listo por hoy!<br>Te luciste.</div>':'<div class="empty-e">‚è≥</div><div class="empty-t">Nada completado a√∫n.</div>';list.innerHTML=`<div class="empty">${m}</div>`;return}
      let h='';items.forEach(r=>{const col=gc(r.cat);if(confirmDelId===r.id){h+=`<div class="del-confirm"><p class="del-msg">¬øSeguro que quieres borrar<br>"${r.text}"?</p><div class="del-btns"><button class="del-no" onclick="cancelDel()">No, dejar</button><button class="del-yes" onclick="confirmDelete(${r.id})">S√≠, borrar</button></div></div>`}else{const dc=r.done?' done':'',ck=r.done?' on':'',cs=r.done?`border-color:${col};background:${col};color:white`:`border-color:${col};color:${col}`,cv=r.done?'‚úì':'',dl=r.done?'':`<button class="rc-del" onclick="event.stopPropagation();askDel(${r.id})" aria-label="Borrar">‚úï</button>`;h+=`<div class="rc${dc}" style="border-left-color:${col}" onclick="toggleReminder(${r.id})"><div class="rc-chk${ck}" style="${cs}">${cv}</div><div class="rc-body"><div class="rc-txt">${r.text}</div><div class="rc-time"><span class="rc-dot" style="background:${col}"></span>${r.time}</div></div>${dl}</div>`}});
      list.innerHTML=h;
    }
    function toggleReminder(id){const r=reminders.find(r=>r.id===id);if(r){playTone(r.done?'undo':'complete');r.done=!r.done}confirmDelId=null;render()}
    function askDel(id){confirmDelId=id;render()}
    function cancelDel(){confirmDelId=null;render()}
    function confirmDelete(id){reminders=reminders.filter(r=>r.id!==id);confirmDelId=null;render()}
    function switchTab(t){currentTab=t;confirmDelId=null;document.getElementById('tabHoy').classList.toggle('act',t==='hoy');document.getElementById('tabListo').classList.toggle('act',t==='listo');render()}
    function toggleForm(){formOpen=!formOpen;document.getElementById('addForm').classList.toggle('open',formOpen);document.getElementById('fabAdd').textContent=formOpen?'‚úï':'+';if(formOpen)document.getElementById('newText').focus()}
    function addReminder(){const t=document.getElementById('newText').value.trim();if(!t)return;playTone('add');reminders.push({id:Date.now(),text:t,time:document.getElementById('newTime').value,cat:newCat,done:false});document.getElementById('newText').value='';newCat='personal';renderCatPills();toggleForm();render()}
    function selectMood(v){currentMood=v;playTone('mood');document.querySelectorAll('#moodGrid .mood-btn').forEach(b=>b.classList.toggle('sel',b.dataset.val===v));const r=document.getElementById('moodResp');r.textContent=MOOD_RESP[v];r.style.opacity='1'}
    function selectCIMood(v){ciMood=v;playTone('mood');document.querySelectorAll('#ciMoodGrid .ci-mood-btn').forEach(b=>b.classList.toggle('sel',b.dataset.val===v))}
    function selectCat(id){newCat=id;renderCatPills()}
    function openCheckin(){ciMood=null;document.getElementById('ciNote').value='';document.getElementById('checkinContent').classList.remove('hidden');document.getElementById('checkinSuccess').classList.add('hidden');document.getElementById('checkinOverlay').classList.add('open');renderCIMoods()}
    function closeCheckinBg(e){if(e.target===document.getElementById('checkinOverlay'))document.getElementById('checkinOverlay').classList.remove('open')}
    function submitCheckin(){playTone('checkin');document.getElementById('checkinContent').classList.add('hidden');document.getElementById('checkinSuccess').classList.remove('hidden');setTimeout(()=>document.getElementById('checkinOverlay').classList.remove('open'),3000)}
    document.getElementById('soundBtn').addEventListener('click',()=>{soundOn=!soundOn;document.getElementById('soundBtn').textContent=soundOn?'üîä':'üîá'});
    document.getElementById('msgInput').addEventListener('keydown',e=>{if(e.key==='Enter')sendMsg()});
    function buildMoodGrid(){document.getElementById('moodGrid').innerHTML=MOODS.map(m=>`<button class="mood-btn" data-val="${m.val}" onclick="selectMood('${m.val}')" aria-label="${m.label}"><span class="mood-e">${m.emoji}</span><span class="mood-lb">${m.label}</span></button>`).join('')}
    function renderCIMoods(){document.getElementById('ciMoodGrid').innerHTML=MOODS.map(m=>`<button class="ci-mood-btn" data-val="${m.val}" onclick="selectCIMood('${m.val}')"><span class="mood-e" style="font-size:30px">${m.emoji}</span><span class="mood-lb">${m.label}</span></button>`).join('')}
    function buildTimeSelect(){document.getElementById('newTime').innerHTML=HORAS.map(t=>`<option value="${t}">${t}</option>`).join('');document.getElementById('newTime').value='9:00 AM'}
    function renderCatPills(){document.getElementById('catPills').innerHTML=CATS.map(c=>{const s=newCat===c.id,st=s?`background:${c.color};border-color:${c.color};color:white`:'';return`<button class="cpill${s?' sel':''}" style="${st}" onclick="selectCat('${c.id}')">${c.icon} ${c.label}</button>`}).join('')}
    document.getElementById('newText').addEventListener('keydown',e=>{if(e.key==='Enter')addReminder()});
    document.getElementById('fecha').textContent=formatFecha(new Date());
    document.getElementById('saludoText').textContent=getSaludo()+' ‚òÄÔ∏è';
    document.getElementById('mensajeDiario').textContent=MENSAJES[Math.floor(Math.random()*MENSAJES.length)];
    buildMoodGrid();buildTimeSelect();renderCatPills();render();
  </script>
</body>
</html>